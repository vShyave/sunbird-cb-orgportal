<div class="searchfilter">
  <ws-app-searchuser (handleApiData)="onSearch($event)"></ws-app-searchuser>
</div>

<mat-accordion>
  <mat-expansion-panel class="user-card" *ngFor="let user of usersData.content">
    <mat-expansion-panel-header (click)="getUerData(user)">
      <div class="flex flex-row gap-4 justify-between w-full">
        <div class="flex flex-row gap-4 items-center">
          <ws-widget-avatar-photo [name]="getUserAvatarName(user)" [photoUrl]="user?.photo" size="m"
            class="md-round"></ws-widget-avatar-photo>
          <div class="flex flex-col gap-1">
            <div class="flex flex-row gap-4">
              {{ handleFormatName(user?.profileDetails?.personalDetails?.firstname) }}
              <div class="flex flex-row items-center gap-1 status-label verified"
                *ngIf="currentFilter !== 'nonverified'">
                Verified
                <mat-icon>check_circle</mat-icon>
              </div>
              <div class="flex flex-row items-center gap-1 status-label nonverified"
                *ngIf="currentFilter === 'nonverified'">
                Non-verified
                <mat-icon>check_circle</mat-icon>
              </div>
            </div>
            <div class="mat-body-2 ws-mat-black40-text">
              {{ user?.profileDetails?.professionalDetails?.designation || 'NA' }}
            </div>
          </div>
        </div>
        <div class="flex flex-row items-center">
          <div class="flex items-center button mat-body gap-2 mr-8" (click)="editUser(user)">
            <mat-icon>edit</mat-icon>
            Edit
          </div>
        </div>
      </div>
    </mat-expansion-panel-header>
    <div class="flex flex-col gap-5 p-6">
      <div class="flex flex-row gap-4 justify-between">
        <div class="flex flex-row gap-1 items-center">
          <div class="text-base font-semibold">Primary Details</div>
          <mat-icon class="ws-mat-black40-text">info_outline</mat-icon>
        </div>
        <div class="flex flex-row gap-2">
          <div class="font-semibold text-base">Mark this user as non-verified</div>
        </div>
      </div>

      <form [formGroup]="updateUserDataForm">
        <div class="grid grid-flow-row sm:grid-flow-col gap-10 grid-col grid-container-25">
          <!-- <div class="grid-container-25"> -->
          <div class="flex flex-col gap-1">
            <label class="info-label required">Designation</label>
            <mat-form-field class="profile-form-field">
              <mat-select formControlName="designation" i18n-placeholder
                (selectionChange)="otherDropDownChange(designation.value, 'designation')">
                <mat-option value="" disabled>--Select--</mat-option>
                <mat-option [value]="designation.name" *ngFor="let designation of designationsMeta">
                  {{designation.name}}
                </mat-option>
                <mat-option [value]="'Other'">Other</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <!-- </div> -->

          <!-- <div class="grid-container-25"> -->
          <div class="flex flex-col gap-1">
            <label class="info-label required">Group</label>
            <mat-form-field class="profile-form-field">
              <mat-select formControlName="group"
                (selectionChange)="otherDropDownChange(designation.value, 'designation')">
                <mat-option value="" disabled>--Select--</mat-option>
                <mat-option [value]="designation.name" *ngFor="let designation of designationsMeta">
                  {{designation.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <!-- </div> -->
        </div>
      </form>
      <div class="break-line"></div>
      <div class="flex flex-col gap-5">
        <div class="flex flex-row gap-1 items-center">
          <div class="text-base font-semibold">Other details</div>
          <mat-icon class="ws-mat-black40-text">info_outline</mat-icon>
        </div>

        <div class="grid grid-flow-row sm:grid-flow-col gap-10 grid-col grid-container-33">
          <div class="flex flex-col gap-1">
            <label class="info-label required">Employee ID</label>
            <mat-form-field class="profile-form-field">
              <input type="text" class="input-text" matInput />
            </mat-form-field>
          </div>

          <div class="flex flex-col gap-1">
            <label class="info-label required">Email</label>
            <mat-form-field class="profile-form-field">
              <input type="text" class="input-text" matInput />
            </mat-form-field>
          </div>

          <div class="flex flex-col gap-1">
            <label class="info-label required">Mobile number</label>
            <mat-form-field class="profile-form-field">
              <input type="text" class="input-text" matInput />
            </mat-form-field>
          </div>
        </div>

        <div class="grid grid-flow-row sm:grid-flow-col gap-10 grid-col grid-container-33">
          <div class="flex flex-col gap-1">
            <label class="info-label required">Date of Birth</label>
            <mat-form-field class="profile-form-field">
              <input type="text" class="input-text" matInput />
            </mat-form-field>
          </div>

          <div class="flex flex-col gap-1">
            <label class="info-label required">Mother Tongue</label>
            <mat-form-field class="profile-form-field">
              <input type="text" class="input-text" matInput />
            </mat-form-field>
          </div>

          <div class="flex flex-col gap-1">
            <label class="info-label required">Gender</label>
            <mat-form-field class="profile-form-field">
              <input type="text" class="input-text" matInput />
            </mat-form-field>
          </div>
        </div>

        <div class="grid grid-flow-row sm:grid-flow-col gap-10 grid-col grid-container-33">

          <div class="flex flex-col gap-1">
            <label class="info-label required">Office Pin Code</label>
            <mat-form-field class="profile-form-field">
              <input type="text" class="input-text" matInput />
            </mat-form-field>
          </div>

          <div class="flex flex-col gap-1">
            <label class="info-label required">eHRMS ID</label>
            <mat-form-field class="profile-form-field">
              <input type="text" class="input-text" matInput />
            </mat-form-field>
          </div>

          <div class="flex flex-col gap-1">
            <label class="info-label required">Category</label>
            <mat-form-field class="profile-form-field">
              <input type="text" class="input-text" matInput />
            </mat-form-field>
          </div>

        </div>

        <div class="grid grid-flow-row sm:grid-flow-col gap-10 grid-col grid-container-33">

          <div class="flex flex-col gap-1">
            <label class="info-label required">Tags</label>
            <mat-form-field class="profile-form-field">
              <input type="text" class="input-text" matInput />
            </mat-form-field>
          </div>
        </div>

        <div class="flex flex-col gap-2">
          <label class="info-label required">Role</label>
          <div class="flex flex-wrap gap-3">
            <div class="flex flex-row gap-2 role-chip"
              *ngFor="let item of ['admin', 'content_writer', 'content_reader']">
              {{ item }}
              <mat-checkbox></mat-checkbox>
            </div>
          </div>
        </div>

        <div class="flex flex-row gap-4">
          <button class="action-button">Update</button>
          <button class="outline-button">Cancel</button>
        </div>
      </div>
    </div>
  </mat-expansion-panel>
</mat-accordion>

<div class="flex flex-row justify-center">
  <mat-paginator [pageSize]="pageSize" [length]="totalRecords" [pageSizeOptions]="[20,30,40]"
    (page)="onChangePage($event)"></mat-paginator>
</div>